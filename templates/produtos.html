
{% extends 'base.html' %}
{% block content %}
<a href="/dashboard" class="btn btn-secondary mb-3">
    ← Voltar
</a>
<h3>Cadastrar Produto</h3>
<form method="post">
<input class="form-control mb-2" name="descricao" placeholder="Descrição do Produto">
<input class="form-control mb-2" name="valor" placeholder="Valor Unitário">
<input class="form-control mb-2" name="estoque_inicial" placeholder="Estoque Inicial">
<button class="btn btn-success">Salvar</button>
</form>
<hr>
<h3>Lista de Produtos Cadastrados</h3>
<table class="table table-striped table-bordered">
<tr class="table-primary"><th>ID</th><th>Descrição do Produto</th><th>Valor Unitário</th><th>Estoque Inicial</th><th>Estoque Atual</th><th>Ações</th></tr>
{% for p in produtos %}
<tr>
  <td>{{ p.id }}</td>
  <td>{{ p.descricao }}</td>
  <td>R$ {{ "{:,.2f}".format(p.valor).replace(",", "X").replace(".", ",").replace("X", ".") }}</td>
  <td>{{ p.estoque_inicial }}</td>
  <td>{{ p.estoque_atual }}</td>
  <td>
    <a href="/editar_produto/{{ p.id }}" class="btn btn-warning btn-sm"title="Editar"><i class="bi bi-pencil-square"></i></a>
    <form action="/zerar_estoque/{{ p.id }}" 
      method="POST" 
      style="display:inline-block;"
      onsubmit="return confirm('Deseja realmente zerar o estoque deste produto?');">

    <button type="submit" 
            class="btn btn-sm btn-outline-danger"
            title="Zerar Estoque">
        <i class="bi bi-arrow-counterclockwise"></i>
    </button>

</form>

  </td>
</tr>
{% endfor %}
</table>
{% endblock %}
